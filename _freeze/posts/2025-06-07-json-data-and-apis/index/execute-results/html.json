{
  "hash": "bfe54805f039b8e771c7ff23973eb9d5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"JSON Data and API's\"\ndescription: \"[add title]\"\nauthor:\n  - name: Matt Babb\ndate: 06-07-2025\ncategories: [Quarto, R, JSON] # self-defined categories\nimage: leaflet_route.jpg\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\neditor: source\nembed-resources: true\necho: true\nwarning: false\nerror: false\ncode-fold: true\ncode-tools: true\n---\n\n## Pass Times for U.S. State Captials\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidyjson)\nlibrary(lubridate)\n\nstates <- read_table(\n  \"https://people.sc.fsu.edu/~jburkardt/datasets/states/state_capitals_ll.txt\",\n  col_names = c(\"state\", \"lat\", \"long\")\n) |>\n  filter(state != \"US\")\n\nget_datetimes <- function(lat, long, wait = 0.1) {\n  Sys.sleep(wait)\n\n  tryCatch(\n    {\n      start_times <- httr::GET(\n        glue::glue(\n          \"https://api.g7vrd.co.uk/v1/satellite-passes/25544/{lat}/{long}.json\"\n        ),\n        httr::timeout(10)\n      )$content |>\n        rawToChar() |>\n        as.tbl_json() |>\n        enter_object(\"passes\") |>\n        gather_array() |>\n        spread_all() |>\n        mutate(start_dt = as_datetime(start)) |>\n        filter(!is.na(start_dt)) |>\n        arrange(start_dt) |>\n        pull(start_dt)\n\n      valid_pass <- \\(n)\n        if (length(start_times) >= n) start_times[n] else NA_POSIXct_\n\n      tibble(\n        pass1 = valid_pass(1),\n        pass2 = valid_pass(2),\n        pass3 = valid_pass(3),\n      )\n    },\n    error = function(e) {\n      warning(glue::glue(\n        \"Error processing API for ({lat},{long}): {e$message}\"\n      ))\n      tibble(\n        pass1 = NA_POSIXct_,\n        pass2 = NA_POSIXct_,\n        pass3 = NA_POSIXct_\n      )\n    }\n  )\n}\n\nresult <- bind_cols(states, map2_df(states$lat, states$long, get_datetimes)) |>\n  write_csv(\"space_data.csv\")\n```\n:::\n\n\n## Mapping the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load libraries\nlibrary(readr)\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(lutz)\nlibrary(purrr)\nlibrary(leaflet)\n\n# Read in your ISS pass data CSV\nspace_data <- read_csv(\"space_data.csv\")\n\n# Clean the data:\n#    - Remove rows where all passes are NA\n#    - Filter only valid U.S. longitudes (negative)\ncleaned_space <- space_data %>%\n  filter(!(is.na(pass1) & is.na(pass2) & is.na(pass3))) %>%\n  filter(long < 0)\n\n# Assign time zones based on latitude & longitude\ncleaned_space <- cleaned_space %>%\n  mutate(tz = tz_lookup_coords(lat, long, method = \"accurate\"))\n\n# Keep only rows with valid Olson time zones\ncleaned_space <- cleaned_space %>%\n  filter(tz %in% OlsonNames())\n\n# Convert UTC pass times to local time for each state (rowwise using map2)\ncleaned_space <- cleaned_space %>%\n  mutate(\n    pass1_local = as_datetime(unlist(map2(pass1, tz, ~ with_tz(.x, .y)))),\n    pass2_local = as_datetime(unlist(map2(pass2, tz, ~ with_tz(.x, .y)))),\n    pass3_local = as_datetime(unlist(map2(pass3, tz, ~ with_tz(.x, .y))))\n  )\n\n\nrocket_icon <- makeIcon(\n  iconUrl = \"rocket.svg\",\n  iconWidth = 30, # Adjust size as needed\n  iconHeight = 30\n)\n```\n:::\n\n\n\n## International Space Station Pass Times (Local Time Zones)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot\nm <- leaflet(cleaned_space) %>%\n  addTiles() %>%\n  addMarkers(\n    lng = ~long,\n    lat = ~lat,\n    icon = rocket_icon,\n\n    # Hover label shows next pass in local time\n    label = ~ paste0(\"Next pass: \", format(pass1_local, \"%Y-%m-%d %H:%M:%S\")),\n\n    # Clickable popup shows all 3 local pass times\n    popup = ~ paste0(\n      \"<b>\",\n      state,\n      \"</b><br/>\",\n      \"Pass 1: \",\n      format(pass1_local, \"%Y-%m-%d %H:%M:%S\"),\n      \"<br/>\",\n      \"Pass 2: \",\n      format(pass2_local, \"%Y-%m-%d %H:%M:%S\"),\n      \"<br/>\",\n      \"Pass 3: \",\n      format(pass3_local, \"%Y-%m-%d %H:%M:%S\")\n    )\n  )\nm\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-3cba4ee0bbc6c7baac7a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3cba4ee0bbc6c7baac7a\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[[32.361538,33.448457,34.736009,38.555605,39.7391667,41.767,38.913,39.161921,30.4518,33.76,21.30895,43.613739,39.78325,39.790942,41.590939,39.04,38.197274,30.45809,44.323535,38.972945,42.2352,42.7335,44.95,32.32,38.572954,46.595805,40.809868,39.160949,43.220093,40.221741,35.667231,42.659829,35.771,48.813343,39.962245,35.482309,44.931109,40.269789,18.2208,41.82355,34,44.367966,36.165,30.266667,40.7547,44.26639,37.54,47.042418,38.349497,43.074722,41.145548],[-86.279118,-112.073844,-92.33112199999999,-121.468926,-104.984167,-72.67700000000001,-77.01300000000001,-75.52675499999999,-84.27276999999999,-84.39,-157.826182,-116.237651,-89.650373,-86.147685,-93.62086600000001,-95.69,-84.86311000000001,-91.14022900000001,-69.765261,-76.50115700000001,-71.0275,-84.5467,-93.09399999999999,-90.20699999999999,-92.189283,-112.027031,-96.67534499999999,-119.753877,-71.549127,-74.75613800000001,-105.964575,-73.781339,-78.63800000000001,-100.779004,-83.000647,-97.534994,-123.029159,-76.875613,-66.59010000000001,-71.422132,-81.035,-100.336378,-86.78400000000001,-97.75,-111.892622,-72.57194,-77.45999999999999,-122.893077,-81.63329400000001,-89.384444,-104.802042],{\"iconUrl\":{\"data\":\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBVcGxvYWRlZCB0bzogU1ZHIFJlcG8sIHd3dy5zdmdyZXBvLmNvbSwgR2VuZXJhdG9yOiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4NCjxzdmcgZmlsbD0iIzAwMDAwMCIgaGVpZ2h0PSI4MDBweCIgd2lkdGg9IjgwMHB4IiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiANCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik00MTQuMTE4LDM4Mi4xNzN2LTkyLjI5MWwtNzUuMjk0LTU2LjQ3MVYxMjAuNDcxQzMzOC44MjQsNDUuMTc2LDI1NiwwLDI1Niwwcy04Mi44MjQsNDUuMTc2LTgyLjgyNCwxMjAuNDcxdjExMi45NDENCgkJCWwtNzUuMjk0LDU2LjQ3MXY5Mi4yOTFMNTIuNzA2LDQyNy4zNXYzOS40NzRoMTIwLjQ3MVY1MTJoMTY1LjY0N3YtNDUuMTc2aDEyMC40NzFWNDI3LjM1TDQxNC4xMTgsMzgyLjE3M3ogTTE3My4xNzYsNDIxLjY0Nw0KCQkJaC01MC44NzlsMjAuNzYyLTIwLjc2MnYtODguNDE1bDMwLjExOC0yMi41ODhWNDIxLjY0N3ogTTI5My42NDcsNDY2LjgyNGgtNzUuMjk0VjEyMC40NzFjMC0xOC4yOTUsOS4wMDEtMzYuODI2LDI2Ljc1Mi01NS4wNzgNCgkJCWMzLjY1OS0zLjc2Myw3LjM2Mi03LjE1OSwxMC44OTUtMTAuMTU5YzMuNTMzLDMsNy4yMzYsNi4zOTYsMTAuODk1LDEwLjE1OWMxNy43NTEsMTguMjUxLDI2Ljc1MiwzNi43ODMsMjYuNzUyLDU1LjA3OFY0NjYuODI0eg0KCQkJIE0zMzguODI0LDQyMS42NDdWMjg5Ljg4MmwzMC4xMTgsMjIuNTg4djg4LjQxNWwyMC43NjIsMjAuNzYySDMzOC44MjR6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+\",\"index\":0},\"iconWidth\":30,\"iconHeight\":30},null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},[\"<b>AL<\\/b><br/>Pass 1: 2025-06-08 13:31:42<br/>Pass 2: 2025-06-08 21:40:42<br/>Pass 3: 2025-06-09 20:52:22\",\"<b>AZ<\\/b><br/>Pass 1: 2025-06-08 15:04:33<br/>Pass 2: 2025-06-08 23:13:03<br/>Pass 3: 2025-06-09 15:52:48\",\"<b>AR<\\/b><br/>Pass 1: 2025-06-08 15:07:59<br/>Pass 2: 2025-06-08 21:39:19<br/>Pass 3: 2025-06-09 14:19:24\",\"<b>CA<\\/b><br/>Pass 1: 2025-06-08 16:40:24<br/>Pass 2: 2025-06-08 23:10:34<br/>Pass 3: 2025-06-09 15:52:04\",\"<b>CO<\\/b><br/>Pass 1: 2025-06-08 15:06:50<br/>Pass 2: 2025-06-08 21:36:25<br/>Pass 3: 2025-06-09 15:54:55\",\"<b>CT<\\/b><br/>Pass 1: 2025-06-08 13:35:30<br/>Pass 2: 2025-06-08 20:04:40<br/>Pass 3: 2025-06-09 12:47:20\",\"<b>DC<\\/b><br/>Pass 1: 2025-06-08 13:34:20<br/>Pass 2: 2025-06-08 20:04:25<br/>Pass 3: 2025-06-09 12:46:10\",\"<b>DE<\\/b><br/>Pass 1: 2025-06-08 13:34:36<br/>Pass 2: 2025-06-08 20:04:36<br/>Pass 3: 2025-06-09 12:46:21\",\"<b>FL<\\/b><br/>Pass 1: 2025-06-08 13:31:36<br/>Pass 2: 2025-06-08 21:41:26<br/>Pass 3: 2025-06-09 12:43:21\",\"<b>GA<\\/b><br/>Pass 1: 2025-06-08 13:32:17<br/>Pass 2: 2025-06-08 21:40:47<br/>Pass 3: 2025-06-09 20:52:22\",\"<b>HI<\\/b><br/>Pass 1: 2025-06-08 03:09:52<br/>Pass 2: 2025-06-08 18:07:57<br/>Pass 3: 2025-06-09 17:19:27\",\"<b>ID<\\/b><br/>Pass 1: 2025-06-08 16:42:03<br/>Pass 2: 2025-06-08 21:33:53<br/>Pass 3: 2025-06-08 23:10:43\",\"<b>IL<\\/b><br/>Pass 1: 2025-06-08 15:09:08<br/>Pass 2: 2025-06-08 21:38:53<br/>Pass 3: 2025-06-09 14:20:38\",\"<b>IN<\\/b><br/>Pass 1: 2025-06-08 15:09:48<br/>Pass 2: 2025-06-08 21:39:33<br/>Pass 3: 2025-06-09 14:21:13\",\"<b>IA<\\/b><br/>Pass 1: 2025-06-08 15:08:44<br/>Pass 2: 2025-06-08 21:37:59<br/>Pass 3: 2025-06-09 14:20:24\",\"<b>KS<\\/b><br/>Pass 1: 2025-06-08 15:07:59<br/>Pass 2: 2025-06-08 21:37:59<br/>Pass 3: 2025-06-09 14:19:39\",\"<b>KY<\\/b><br/>Pass 1: 2025-06-08 21:40:00<br/>Pass 2: 2025-06-09 14:21:15<br/>Pass 3: 2025-06-09 20:51:30\",\"<b>LA<\\/b><br/>Pass 1: 2025-06-08 13:30:40<br/>Pass 2: 2025-06-08 21:40:25<br/>Pass 3: NA\",\"<b>ME<\\/b><br/>Pass 1: 2025-06-08 13:36:26<br/>Pass 2: 2025-06-08 15:13:21<br/>Pass 3: 2025-06-08 18:28:01\",\"<b>MD<\\/b><br/>Pass 1: 2025-06-08 13:34:26<br/>Pass 2: 2025-06-08 20:04:31<br/>Pass 3: 2025-06-09 12:46:16\",\"<b>MA<\\/b><br/>Pass 1: 2025-06-08 13:35:51<br/>Pass 2: 2025-06-08 20:04:51<br/>Pass 3: 2025-06-09 12:47:36\",\"<b>MI<\\/b><br/>Pass 1: 2025-06-08 15:10:27<br/>Pass 2: 2025-06-08 20:02:32<br/>Pass 3: 2025-06-09 14:21:57\",\"<b>MN<\\/b><br/>Pass 1: 2025-06-08 15:09:27<br/>Pass 2: 2025-06-08 16:46:17<br/>Pass 3: 2025-06-08 20:00:47\",\"<b>MS<\\/b><br/>Pass 1: 2025-06-08 13:31:18<br/>Pass 2: 2025-06-08 21:40:08<br/>Pass 3: 2025-06-09 14:19:28\",\"<b>MO<\\/b><br/>Pass 1: 2025-06-08 15:08:28<br/>Pass 2: 2025-06-08 21:38:38<br/>Pass 3: 2025-06-09 14:20:03\",\"<b>MT<\\/b><br/>Pass 1: 2025-06-08 16:43:13<br/>Pass 2: 2025-06-08 18:20:03<br/>Pass 3: 2025-06-08 19:57:18\",\"<b>NE<\\/b><br/>Pass 1: 2025-06-08 15:08:09<br/>Pass 2: 2025-06-08 21:37:34<br/>Pass 3: 2025-06-09 14:19:54\",\"<b>NV<\\/b><br/>Pass 1: 2025-06-08 16:40:44<br/>Pass 2: 2025-06-08 23:10:44<br/>Pass 3: 2025-06-09 15:52:24\",\"<b>NH<\\/b><br/>Pass 1: 2025-06-08 13:36:00<br/>Pass 2: 2025-06-08 18:27:50<br/>Pass 3: 2025-06-08 20:04:40\",\"<b>NJ<\\/b><br/>Pass 1: 2025-06-08 13:34:55<br/>Pass 2: 2025-06-08 20:04:35<br/>Pass 3: 2025-06-09 12:46:45\",\"<b>NM<\\/b><br/>Pass 1: 2025-06-08 15:05:45<br/>Pass 2: 2025-06-08 23:13:40<br/>Pass 3: 2025-06-09 22:25:10\",\"<b>NY<\\/b><br/>Pass 1: 2025-06-08 13:35:31<br/>Pass 2: 2025-06-08 15:12:31<br/>Pass 3: 2025-06-08 20:04:21\",\"<b>NC<\\/b><br/>Pass 1: 2025-06-08 13:33:31<br/>Pass 2: 2025-06-09 12:45:16<br/>Pass 3: 2025-06-09 20:52:56\",\"<b>ND<\\/b><br/>Pass 1: 2025-06-08 16:45:12<br/>Pass 2: 2025-06-08 18:22:07<br/>Pass 3: 2025-06-08 19:59:02\",\"<b>OH<\\/b><br/>Pass 1: 2025-06-08 15:10:27<br/>Pass 2: 2025-06-08 20:03:17<br/>Pass 3: 2025-06-09 14:21:47\",\"<b>OK<\\/b><br/>Pass 1: 2025-06-08 15:07:03<br/>Pass 2: 2025-06-08 21:38:23<br/>Pass 3: 2025-06-09 14:18:38\",\"<b>OR<\\/b><br/>Pass 1: 2025-06-08 18:17:53<br/>Pass 2: 2025-06-08 21:32:33<br/>Pass 3: 2025-06-08 23:09:23\",\"<b>PA<\\/b><br/>Pass 1: 2025-06-08 13:34:38<br/>Pass 2: 2025-06-08 20:04:13<br/>Pass 3: 2025-06-09 14:23:03\",\"<b>PR<\\/b><br/>Pass 1: 2025-06-08 11:55:29<br/>Pass 2: 2025-06-08 21:46:49<br/>Pass 3: 2025-06-09 11:06:59\",\"<b>RI<\\/b><br/>Pass 1: 2025-06-08 13:35:44<br/>Pass 2: 2025-06-08 20:04:49<br/>Pass 3: 2025-06-09 12:47:29\",\"<b>SC<\\/b><br/>Pass 1: 2025-06-08 13:32:50<br/>Pass 2: 2025-06-08 21:41:20<br/>Pass 3: 2025-06-09 12:44:35\",\"<b>SD<\\/b><br/>Pass 1: 2025-06-08 16:44:50<br/>Pass 2: 2025-06-08 19:59:40<br/>Pass 3: 2025-06-08 21:36:25\",\"<b>TN<\\/b><br/>Pass 1: 2025-06-08 13:32:36<br/>Pass 2: 2025-06-08 21:40:01<br/>Pass 3: 2025-06-09 14:20:36\",\"<b>TX<\\/b><br/>Pass 1: 2025-06-09 14:17:41<br/>Pass 2: 2025-06-09 22:27:31<br/>Pass 3: NA\",\"<b>UT<\\/b><br/>Pass 1: 2025-06-08 16:42:21<br/>Pass 2: 2025-06-08 23:11:51<br/>Pass 3: 2025-06-09 15:53:51\",\"<b>VT<\\/b><br/>Pass 1: 2025-06-08 13:36:02<br/>Pass 2: 2025-06-08 15:12:47<br/>Pass 3: 2025-06-08 18:27:32\",\"<b>VA<\\/b><br/>Pass 1: 2025-06-08 13:34:02<br/>Pass 2: 2025-06-08 20:04:37<br/>Pass 3: 2025-06-09 12:45:47\",\"<b>WA<\\/b><br/>Pass 1: 2025-06-08 18:18:08<br/>Pass 2: 2025-06-08 19:55:18<br/>Pass 3: 2025-06-08 21:32:18\",\"<b>WV<\\/b><br/>Pass 1: 2025-06-08 13:33:38<br/>Pass 2: 2025-06-08 20:03:48<br/>Pass 3: 2025-06-09 14:21:53\",\"<b>WI<\\/b><br/>Pass 1: 2025-06-08 15:09:38<br/>Pass 2: 2025-06-08 20:01:43<br/>Pass 3: 2025-06-09 14:21:18\",\"<b>WY<\\/b><br/>Pass 1: 2025-06-08 16:43:44<br/>Pass 2: 2025-06-08 21:36:09<br/>Pass 3: 2025-06-09 15:55:09\"],null,null,null,[\"Next pass: 2025-06-08 13:31:42\",\"Next pass: 2025-06-08 15:04:33\",\"Next pass: 2025-06-08 15:07:59\",\"Next pass: 2025-06-08 16:40:24\",\"Next pass: 2025-06-08 15:06:50\",\"Next pass: 2025-06-08 13:35:30\",\"Next pass: 2025-06-08 13:34:20\",\"Next pass: 2025-06-08 13:34:36\",\"Next pass: 2025-06-08 13:31:36\",\"Next pass: 2025-06-08 13:32:17\",\"Next pass: 2025-06-08 03:09:52\",\"Next pass: 2025-06-08 16:42:03\",\"Next pass: 2025-06-08 15:09:08\",\"Next pass: 2025-06-08 15:09:48\",\"Next pass: 2025-06-08 15:08:44\",\"Next pass: 2025-06-08 15:07:59\",\"Next pass: 2025-06-08 21:40:00\",\"Next pass: 2025-06-08 13:30:40\",\"Next pass: 2025-06-08 13:36:26\",\"Next pass: 2025-06-08 13:34:26\",\"Next pass: 2025-06-08 13:35:51\",\"Next pass: 2025-06-08 15:10:27\",\"Next pass: 2025-06-08 15:09:27\",\"Next pass: 2025-06-08 13:31:18\",\"Next pass: 2025-06-08 15:08:28\",\"Next pass: 2025-06-08 16:43:13\",\"Next pass: 2025-06-08 15:08:09\",\"Next pass: 2025-06-08 16:40:44\",\"Next pass: 2025-06-08 13:36:00\",\"Next pass: 2025-06-08 13:34:55\",\"Next pass: 2025-06-08 15:05:45\",\"Next pass: 2025-06-08 13:35:31\",\"Next pass: 2025-06-08 13:33:31\",\"Next pass: 2025-06-08 16:45:12\",\"Next pass: 2025-06-08 15:10:27\",\"Next pass: 2025-06-08 15:07:03\",\"Next pass: 2025-06-08 18:17:53\",\"Next pass: 2025-06-08 13:34:38\",\"Next pass: 2025-06-08 11:55:29\",\"Next pass: 2025-06-08 13:35:44\",\"Next pass: 2025-06-08 13:32:50\",\"Next pass: 2025-06-08 16:44:50\",\"Next pass: 2025-06-08 13:32:36\",\"Next pass: 2025-06-09 14:17:41\",\"Next pass: 2025-06-08 16:42:21\",\"Next pass: 2025-06-08 13:36:02\",\"Next pass: 2025-06-08 13:34:02\",\"Next pass: 2025-06-08 18:18:08\",\"Next pass: 2025-06-08 13:33:38\",\"Next pass: 2025-06-08 15:09:38\",\"Next pass: 2025-06-08 16:43:44\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[18.2208,48.813343],\"lng\":[-157.826182,-66.59010000000001]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## Drawing the Route of the ISS\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet.extras2)\n\nordered_result <- result |>\n  filter(!is.na(pass1)) |>\n  arrange(pass1)\n\nm |>\n  addArrowhead(\n    data = ordered_result,\n    lat = ~lat,\n    lng = ~long,\n    color = \"red\",\n    options = arrowheadOptions(\n      frequency = \"200px\",\n      size = \"10px\",\n      color = \"purple\",\n      opacity = 1,\n      fill = TRUE\n    )\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-69c698adf70bb158f7e8\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-69c698adf70bb158f7e8\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[[32.361538,33.448457,34.736009,38.555605,39.7391667,41.767,38.913,39.161921,30.4518,33.76,21.30895,43.613739,39.78325,39.790942,41.590939,39.04,38.197274,30.45809,44.323535,38.972945,42.2352,42.7335,44.95,32.32,38.572954,46.595805,40.809868,39.160949,43.220093,40.221741,35.667231,42.659829,35.771,48.813343,39.962245,35.482309,44.931109,40.269789,18.2208,41.82355,34,44.367966,36.165,30.266667,40.7547,44.26639,37.54,47.042418,38.349497,43.074722,41.145548],[-86.279118,-112.073844,-92.33112199999999,-121.468926,-104.984167,-72.67700000000001,-77.01300000000001,-75.52675499999999,-84.27276999999999,-84.39,-157.826182,-116.237651,-89.650373,-86.147685,-93.62086600000001,-95.69,-84.86311000000001,-91.14022900000001,-69.765261,-76.50115700000001,-71.0275,-84.5467,-93.09399999999999,-90.20699999999999,-92.189283,-112.027031,-96.67534499999999,-119.753877,-71.549127,-74.75613800000001,-105.964575,-73.781339,-78.63800000000001,-100.779004,-83.000647,-97.534994,-123.029159,-76.875613,-66.59010000000001,-71.422132,-81.035,-100.336378,-86.78400000000001,-97.75,-111.892622,-72.57194,-77.45999999999999,-122.893077,-81.63329400000001,-89.384444,-104.802042],{\"iconUrl\":{\"data\":\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBVcGxvYWRlZCB0bzogU1ZHIFJlcG8sIHd3dy5zdmdyZXBvLmNvbSwgR2VuZXJhdG9yOiBTVkcgUmVwbyBNaXhlciBUb29scyAtLT4NCjxzdmcgZmlsbD0iIzAwMDAwMCIgaGVpZ2h0PSI4MDBweCIgd2lkdGg9IjgwMHB4IiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiANCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik00MTQuMTE4LDM4Mi4xNzN2LTkyLjI5MWwtNzUuMjk0LTU2LjQ3MVYxMjAuNDcxQzMzOC44MjQsNDUuMTc2LDI1NiwwLDI1Niwwcy04Mi44MjQsNDUuMTc2LTgyLjgyNCwxMjAuNDcxdjExMi45NDENCgkJCWwtNzUuMjk0LDU2LjQ3MXY5Mi4yOTFMNTIuNzA2LDQyNy4zNXYzOS40NzRoMTIwLjQ3MVY1MTJoMTY1LjY0N3YtNDUuMTc2aDEyMC40NzFWNDI3LjM1TDQxNC4xMTgsMzgyLjE3M3ogTTE3My4xNzYsNDIxLjY0Nw0KCQkJaC01MC44NzlsMjAuNzYyLTIwLjc2MnYtODguNDE1bDMwLjExOC0yMi41ODhWNDIxLjY0N3ogTTI5My42NDcsNDY2LjgyNGgtNzUuMjk0VjEyMC40NzFjMC0xOC4yOTUsOS4wMDEtMzYuODI2LDI2Ljc1Mi01NS4wNzgNCgkJCWMzLjY1OS0zLjc2Myw3LjM2Mi03LjE1OSwxMC44OTUtMTAuMTU5YzMuNTMzLDMsNy4yMzYsNi4zOTYsMTAuODk1LDEwLjE1OWMxNy43NTEsMTguMjUxLDI2Ljc1MiwzNi43ODMsMjYuNzUyLDU1LjA3OFY0NjYuODI0eg0KCQkJIE0zMzguODI0LDQyMS42NDdWMjg5Ljg4MmwzMC4xMTgsMjIuNTg4djg4LjQxNWwyMC43NjIsMjAuNzYySDMzOC44MjR6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+\",\"index\":0},\"iconWidth\":30,\"iconHeight\":30},null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},[\"<b>AL<\\/b><br/>Pass 1: 2025-06-08 13:31:42<br/>Pass 2: 2025-06-08 21:40:42<br/>Pass 3: 2025-06-09 20:52:22\",\"<b>AZ<\\/b><br/>Pass 1: 2025-06-08 15:04:33<br/>Pass 2: 2025-06-08 23:13:03<br/>Pass 3: 2025-06-09 15:52:48\",\"<b>AR<\\/b><br/>Pass 1: 2025-06-08 15:07:59<br/>Pass 2: 2025-06-08 21:39:19<br/>Pass 3: 2025-06-09 14:19:24\",\"<b>CA<\\/b><br/>Pass 1: 2025-06-08 16:40:24<br/>Pass 2: 2025-06-08 23:10:34<br/>Pass 3: 2025-06-09 15:52:04\",\"<b>CO<\\/b><br/>Pass 1: 2025-06-08 15:06:50<br/>Pass 2: 2025-06-08 21:36:25<br/>Pass 3: 2025-06-09 15:54:55\",\"<b>CT<\\/b><br/>Pass 1: 2025-06-08 13:35:30<br/>Pass 2: 2025-06-08 20:04:40<br/>Pass 3: 2025-06-09 12:47:20\",\"<b>DC<\\/b><br/>Pass 1: 2025-06-08 13:34:20<br/>Pass 2: 2025-06-08 20:04:25<br/>Pass 3: 2025-06-09 12:46:10\",\"<b>DE<\\/b><br/>Pass 1: 2025-06-08 13:34:36<br/>Pass 2: 2025-06-08 20:04:36<br/>Pass 3: 2025-06-09 12:46:21\",\"<b>FL<\\/b><br/>Pass 1: 2025-06-08 13:31:36<br/>Pass 2: 2025-06-08 21:41:26<br/>Pass 3: 2025-06-09 12:43:21\",\"<b>GA<\\/b><br/>Pass 1: 2025-06-08 13:32:17<br/>Pass 2: 2025-06-08 21:40:47<br/>Pass 3: 2025-06-09 20:52:22\",\"<b>HI<\\/b><br/>Pass 1: 2025-06-08 03:09:52<br/>Pass 2: 2025-06-08 18:07:57<br/>Pass 3: 2025-06-09 17:19:27\",\"<b>ID<\\/b><br/>Pass 1: 2025-06-08 16:42:03<br/>Pass 2: 2025-06-08 21:33:53<br/>Pass 3: 2025-06-08 23:10:43\",\"<b>IL<\\/b><br/>Pass 1: 2025-06-08 15:09:08<br/>Pass 2: 2025-06-08 21:38:53<br/>Pass 3: 2025-06-09 14:20:38\",\"<b>IN<\\/b><br/>Pass 1: 2025-06-08 15:09:48<br/>Pass 2: 2025-06-08 21:39:33<br/>Pass 3: 2025-06-09 14:21:13\",\"<b>IA<\\/b><br/>Pass 1: 2025-06-08 15:08:44<br/>Pass 2: 2025-06-08 21:37:59<br/>Pass 3: 2025-06-09 14:20:24\",\"<b>KS<\\/b><br/>Pass 1: 2025-06-08 15:07:59<br/>Pass 2: 2025-06-08 21:37:59<br/>Pass 3: 2025-06-09 14:19:39\",\"<b>KY<\\/b><br/>Pass 1: 2025-06-08 21:40:00<br/>Pass 2: 2025-06-09 14:21:15<br/>Pass 3: 2025-06-09 20:51:30\",\"<b>LA<\\/b><br/>Pass 1: 2025-06-08 13:30:40<br/>Pass 2: 2025-06-08 21:40:25<br/>Pass 3: NA\",\"<b>ME<\\/b><br/>Pass 1: 2025-06-08 13:36:26<br/>Pass 2: 2025-06-08 15:13:21<br/>Pass 3: 2025-06-08 18:28:01\",\"<b>MD<\\/b><br/>Pass 1: 2025-06-08 13:34:26<br/>Pass 2: 2025-06-08 20:04:31<br/>Pass 3: 2025-06-09 12:46:16\",\"<b>MA<\\/b><br/>Pass 1: 2025-06-08 13:35:51<br/>Pass 2: 2025-06-08 20:04:51<br/>Pass 3: 2025-06-09 12:47:36\",\"<b>MI<\\/b><br/>Pass 1: 2025-06-08 15:10:27<br/>Pass 2: 2025-06-08 20:02:32<br/>Pass 3: 2025-06-09 14:21:57\",\"<b>MN<\\/b><br/>Pass 1: 2025-06-08 15:09:27<br/>Pass 2: 2025-06-08 16:46:17<br/>Pass 3: 2025-06-08 20:00:47\",\"<b>MS<\\/b><br/>Pass 1: 2025-06-08 13:31:18<br/>Pass 2: 2025-06-08 21:40:08<br/>Pass 3: 2025-06-09 14:19:28\",\"<b>MO<\\/b><br/>Pass 1: 2025-06-08 15:08:28<br/>Pass 2: 2025-06-08 21:38:38<br/>Pass 3: 2025-06-09 14:20:03\",\"<b>MT<\\/b><br/>Pass 1: 2025-06-08 16:43:13<br/>Pass 2: 2025-06-08 18:20:03<br/>Pass 3: 2025-06-08 19:57:18\",\"<b>NE<\\/b><br/>Pass 1: 2025-06-08 15:08:09<br/>Pass 2: 2025-06-08 21:37:34<br/>Pass 3: 2025-06-09 14:19:54\",\"<b>NV<\\/b><br/>Pass 1: 2025-06-08 16:40:44<br/>Pass 2: 2025-06-08 23:10:44<br/>Pass 3: 2025-06-09 15:52:24\",\"<b>NH<\\/b><br/>Pass 1: 2025-06-08 13:36:00<br/>Pass 2: 2025-06-08 18:27:50<br/>Pass 3: 2025-06-08 20:04:40\",\"<b>NJ<\\/b><br/>Pass 1: 2025-06-08 13:34:55<br/>Pass 2: 2025-06-08 20:04:35<br/>Pass 3: 2025-06-09 12:46:45\",\"<b>NM<\\/b><br/>Pass 1: 2025-06-08 15:05:45<br/>Pass 2: 2025-06-08 23:13:40<br/>Pass 3: 2025-06-09 22:25:10\",\"<b>NY<\\/b><br/>Pass 1: 2025-06-08 13:35:31<br/>Pass 2: 2025-06-08 15:12:31<br/>Pass 3: 2025-06-08 20:04:21\",\"<b>NC<\\/b><br/>Pass 1: 2025-06-08 13:33:31<br/>Pass 2: 2025-06-09 12:45:16<br/>Pass 3: 2025-06-09 20:52:56\",\"<b>ND<\\/b><br/>Pass 1: 2025-06-08 16:45:12<br/>Pass 2: 2025-06-08 18:22:07<br/>Pass 3: 2025-06-08 19:59:02\",\"<b>OH<\\/b><br/>Pass 1: 2025-06-08 15:10:27<br/>Pass 2: 2025-06-08 20:03:17<br/>Pass 3: 2025-06-09 14:21:47\",\"<b>OK<\\/b><br/>Pass 1: 2025-06-08 15:07:03<br/>Pass 2: 2025-06-08 21:38:23<br/>Pass 3: 2025-06-09 14:18:38\",\"<b>OR<\\/b><br/>Pass 1: 2025-06-08 18:17:53<br/>Pass 2: 2025-06-08 21:32:33<br/>Pass 3: 2025-06-08 23:09:23\",\"<b>PA<\\/b><br/>Pass 1: 2025-06-08 13:34:38<br/>Pass 2: 2025-06-08 20:04:13<br/>Pass 3: 2025-06-09 14:23:03\",\"<b>PR<\\/b><br/>Pass 1: 2025-06-08 11:55:29<br/>Pass 2: 2025-06-08 21:46:49<br/>Pass 3: 2025-06-09 11:06:59\",\"<b>RI<\\/b><br/>Pass 1: 2025-06-08 13:35:44<br/>Pass 2: 2025-06-08 20:04:49<br/>Pass 3: 2025-06-09 12:47:29\",\"<b>SC<\\/b><br/>Pass 1: 2025-06-08 13:32:50<br/>Pass 2: 2025-06-08 21:41:20<br/>Pass 3: 2025-06-09 12:44:35\",\"<b>SD<\\/b><br/>Pass 1: 2025-06-08 16:44:50<br/>Pass 2: 2025-06-08 19:59:40<br/>Pass 3: 2025-06-08 21:36:25\",\"<b>TN<\\/b><br/>Pass 1: 2025-06-08 13:32:36<br/>Pass 2: 2025-06-08 21:40:01<br/>Pass 3: 2025-06-09 14:20:36\",\"<b>TX<\\/b><br/>Pass 1: 2025-06-09 14:17:41<br/>Pass 2: 2025-06-09 22:27:31<br/>Pass 3: NA\",\"<b>UT<\\/b><br/>Pass 1: 2025-06-08 16:42:21<br/>Pass 2: 2025-06-08 23:11:51<br/>Pass 3: 2025-06-09 15:53:51\",\"<b>VT<\\/b><br/>Pass 1: 2025-06-08 13:36:02<br/>Pass 2: 2025-06-08 15:12:47<br/>Pass 3: 2025-06-08 18:27:32\",\"<b>VA<\\/b><br/>Pass 1: 2025-06-08 13:34:02<br/>Pass 2: 2025-06-08 20:04:37<br/>Pass 3: 2025-06-09 12:45:47\",\"<b>WA<\\/b><br/>Pass 1: 2025-06-08 18:18:08<br/>Pass 2: 2025-06-08 19:55:18<br/>Pass 3: 2025-06-08 21:32:18\",\"<b>WV<\\/b><br/>Pass 1: 2025-06-08 13:33:38<br/>Pass 2: 2025-06-08 20:03:48<br/>Pass 3: 2025-06-09 14:21:53\",\"<b>WI<\\/b><br/>Pass 1: 2025-06-08 15:09:38<br/>Pass 2: 2025-06-08 20:01:43<br/>Pass 3: 2025-06-09 14:21:18\",\"<b>WY<\\/b><br/>Pass 1: 2025-06-08 16:43:44<br/>Pass 2: 2025-06-08 21:36:09<br/>Pass 3: 2025-06-09 15:55:09\"],null,null,null,[\"Next pass: 2025-06-08 13:31:42\",\"Next pass: 2025-06-08 15:04:33\",\"Next pass: 2025-06-08 15:07:59\",\"Next pass: 2025-06-08 16:40:24\",\"Next pass: 2025-06-08 15:06:50\",\"Next pass: 2025-06-08 13:35:30\",\"Next pass: 2025-06-08 13:34:20\",\"Next pass: 2025-06-08 13:34:36\",\"Next pass: 2025-06-08 13:31:36\",\"Next pass: 2025-06-08 13:32:17\",\"Next pass: 2025-06-08 03:09:52\",\"Next pass: 2025-06-08 16:42:03\",\"Next pass: 2025-06-08 15:09:08\",\"Next pass: 2025-06-08 15:09:48\",\"Next pass: 2025-06-08 15:08:44\",\"Next pass: 2025-06-08 15:07:59\",\"Next pass: 2025-06-08 21:40:00\",\"Next pass: 2025-06-08 13:30:40\",\"Next pass: 2025-06-08 13:36:26\",\"Next pass: 2025-06-08 13:34:26\",\"Next pass: 2025-06-08 13:35:51\",\"Next pass: 2025-06-08 15:10:27\",\"Next pass: 2025-06-08 15:09:27\",\"Next pass: 2025-06-08 13:31:18\",\"Next pass: 2025-06-08 15:08:28\",\"Next pass: 2025-06-08 16:43:13\",\"Next pass: 2025-06-08 15:08:09\",\"Next pass: 2025-06-08 16:40:44\",\"Next pass: 2025-06-08 13:36:00\",\"Next pass: 2025-06-08 13:34:55\",\"Next pass: 2025-06-08 15:05:45\",\"Next pass: 2025-06-08 13:35:31\",\"Next pass: 2025-06-08 13:33:31\",\"Next pass: 2025-06-08 16:45:12\",\"Next pass: 2025-06-08 15:10:27\",\"Next pass: 2025-06-08 15:07:03\",\"Next pass: 2025-06-08 18:17:53\",\"Next pass: 2025-06-08 13:34:38\",\"Next pass: 2025-06-08 11:55:29\",\"Next pass: 2025-06-08 13:35:44\",\"Next pass: 2025-06-08 13:32:50\",\"Next pass: 2025-06-08 16:44:50\",\"Next pass: 2025-06-08 13:32:36\",\"Next pass: 2025-06-09 14:17:41\",\"Next pass: 2025-06-08 16:42:21\",\"Next pass: 2025-06-08 13:36:02\",\"Next pass: 2025-06-08 13:34:02\",\"Next pass: 2025-06-08 18:18:08\",\"Next pass: 2025-06-08 13:33:38\",\"Next pass: 2025-06-08 15:09:38\",\"Next pass: 2025-06-08 16:43:44\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addArrowhead\",\"args\":[[[[{\"lng\":[-157.826182,-66.59010000000001,-91.14022900000001,-90.20699999999999,-84.27276999999999,-86.279118,-84.39,-86.78400000000001,-81.035,-78.63800000000001,-81.63329400000001,-77.45999999999999,-77.01300000000001,-76.50115700000001,-75.52675499999999,-76.875613,-74.75613800000001,-72.67700000000001,-73.781339,-71.422132,-71.0275,-71.549127,-72.57194,-69.765261,-112.073844,-105.964575,-104.984167,-97.534994,-92.33112199999999,-95.69,-96.67534499999999,-92.189283,-93.62086600000001,-89.650373,-93.09399999999999,-89.384444,-86.147685,-84.5467,-83.000647,-121.468926,-119.753877,-116.237651,-111.892622,-112.027031,-104.802042,-100.336378,-100.779004,-123.029159,-122.893077,-84.86311000000001,-97.75],\"lat\":[21.30895,18.2208,30.45809,32.32,30.4518,32.361538,33.76,36.165,34,35.771,38.349497,37.54,38.913,38.972945,39.161921,40.269789,40.221741,41.767,42.659829,41.82355,42.2352,43.220093,44.26639,44.323535,33.448457,35.667231,39.7391667,35.482309,34.736009,39.04,40.809868,38.572954,41.590939,39.78325,44.95,43.074722,39.790942,42.7335,39.962245,38.555605,39.160949,43.613739,40.7547,46.595805,41.145548,44.367966,48.813343,44.931109,47.042418,38.197274,30.266667]}]]],null,null,{\"stroke\":true,\"color\":\"red\",\"weight\":5,\"opacity\":0.5,\"fill\":false,\"fillColor\":\"red\",\"fillOpacity\":0.2,\"smoothFactor\":1,\"noClip\":false,\"yawn\":60,\"size\":\"10px\",\"frequency\":\"200px\",\"proportionalToTotal\":false,\"color.1\":\"purple\",\"opacity.1\":1,\"fill.1\":true},null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null,{\"yawn\":60,\"size\":\"10px\",\"frequency\":\"200px\",\"proportionalToTotal\":false,\"color\":\"purple\",\"opacity\":1,\"fill\":true}]}],\"limits\":{\"lat\":[18.2208,48.813343],\"lng\":[-157.826182,-66.59010000000001]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n<script src=\"../../site_libs/lfx-arrowhead-1.0.0/leaflet.geometryutil.js\"></script>\n<script src=\"../../site_libs/lfx-arrowhead-1.0.0/leaflet-arrowheads.js\"></script>\n<script src=\"../../site_libs/lfx-arrowhead-1.0.0/leaflet-arrowheads-bindings.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}